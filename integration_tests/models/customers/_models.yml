version: 2

models:
  - name: stream_from_source
    config:
      materialized: stream_task
      unique_key:
        - id
      stream:
        name: "stream_from_source_test"
        description: "Stream for the customers table"
        tags:
          - customers
        copy_grants: False
        append_only: True
      task:
        name: "transform_from_stream_test"
        description: "Task for the customers table"
        when: "SYSTEM$STREAM_HAS_DATA('stream_from_source_test')"
        schedule: "5 MINUTES"
    columns:
      - name: id
